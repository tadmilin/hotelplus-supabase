-- ??????????????

-- 1. ??????????? replicate_id (??????????????????????????? API)
SELECT COUNT(*) as jobs_without_replicate_id
FROM public.jobs 
WHERE replicate_id IS NULL AND job_type != 'upscale';

-- 2. ??????????????? processing ??????? 1 ??
SELECT id, user_email, job_type, status, created_at, replicate_id
FROM public.jobs 
WHERE status IN ('processing', 'processing_template')
AND created_at < NOW() - INTERVAL '1 hour'
ORDER BY created_at DESC;

-- 3. ?????????????????????????
SELECT status, COUNT(*) as count
FROM public.jobs 
WHERE job_type != 'upscale'
GROUP BY status
ORDER BY count DESC;

-- 4. ????????? 20 ??? (??? replicate_id)
SELECT id, user_email, job_type, status, replicate_id, created_at
FROM public.jobs 
WHERE job_type != 'upscale'
ORDER BY created_at DESC 
LIMIT 20;
